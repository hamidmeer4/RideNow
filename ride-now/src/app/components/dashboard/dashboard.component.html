<mat-toolbar class="top-toolbar shadow-sm">
  <div class="container d-flex justify-content-between align-items-center my-4">
    <mat-form-field class="search-bar" appearance="outline">
      <input
        matInput
        type="text"
        class="px-2 py-2 "
        placeholder="Search Drivers, Riders"
      />
      <button mat-icon-button matSuffix>
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>

    <div class="d-flex align-items-center gap-3">
      <button mat-icon-button matTooltip="Notifications" class="icon-btn">
        <mat-icon>notifications</mat-icon>
      </button>

      <div class="profile-avatar position-relative">
        <img
          src="https://randomuser.me/api/portraits/men/75.jpg"
          alt="Profile"
          class="avatar-img"
        />
      </div>

      <button mat-icon-button matTooltip="More Options" class="icon-btn">
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>

<div class="container">
  <div class="welcome-text mb-1 my-3 me-2">
    <h2>Welcome Back, <span class="username">Hamid</span> ðŸ‘‹</h2>
    <p class="subtitle">You can have a look at your current stats below.</p>
  </div>
  <div
    class="row g-3 my-4"
    style="
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    "
  >
    <div class="col-md-2">
      <mat-card
        class="dashboard-card d-flex flex-column align-items-center text-center"
        style="
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
          border-radius: 12px;
          background: #ffffff;
        "
      >
        <img
          src="https://randomuser.me/api/portraits/men/32.jpg"
          alt="John David"
          class="rounded-circle shadow mb-3"
          width="80"
          height="80"
        />
        <mat-icon color="warn" style="font-size: 40px" class="mb-2"
          >star</mat-icon
        >
        <h6 class="fw-semibold montserrat-text mb-1" style="font-size: 12px">John David</h6>
        <small
          class="text-muted"
          style="font-family: 'Montserrat', sans-serif; font-weight: 600"
        >
          Top Driver of the Week
        </small>
      </mat-card>
    </div>

    <div class="col-md-3 montserrat-text">
      <mat-card
        class="dashboard-card"
        style="
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
          border-radius: 12px;
          background: #ffffff;
        "
      >
        <div class="d-flex align-items-center mb-3">
          <div class="icon-circle bg-primary bg-opacity-15 text-primary">
            <mat-icon>person</mat-icon>
          </div>
          <h6 class="ms-3 mb-0 fw-semibold text-uppercase fs-6">Drivers</h6>
          <mat-icon
            matTooltip="Information about drivers"
            class="ms-auto text-muted"
            style="font-size: 18px; cursor: pointer"
            >info</mat-icon
          >
        </div>

        <div class="d-flex justify-content-between mb-3">
          <div class="text-center flex-grow-1">
            <h3 class="mb-1 fw-bold text-primary">86</h3>
            <small class="text-uppercase">Active</small>
          </div>
          <div class="text-center flex-grow-1 border-start border-muted ps-3">
            <h3 class="mb-1 fw-bold text-danger">12</h3>
            <small class="text-uppercase">Inactive</small>
          </div>
        </div>

        <div class="d-flex justify-content-center gap-4">
          <span class="text-success fw-semibold pe-4">+15 this week</span>
          <span class="text-danger fw-semibold">-6 this week</span>
        </div>
      </mat-card>
    </div>

    <div class="col-md-3 montserrat-text">
      <mat-card
        class="dashboard-card"
        style="
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
          border-radius: 12px;
          background: #ffffff;
        "
      >
        <div class="d-flex align-items-center gap-3 mb-3">
          <div class="icon-circle bg-success bg-opacity-25 text-success">
            <mat-icon>paid</mat-icon>
          </div>
          <h6 class="mb-0 fw-semibold text-uppercase fs-6">Earnings</h6>
          <mat-icon
            matTooltip="Total earnings this period"
            class="ms-auto text-muted"
            style="font-size: 20px; cursor: pointer"
            >info</mat-icon
          >
        </div>

        <h1 class="fw-bold mb-1 text-success">$120K</h1>
        <small class="text-muted">Income</small>

        <div class="mt-3">
          <span
            class="badge bg-success bg-opacity-25 text-success px-3 py-2 rounded-pill fw-semibold"
          >
            +38.6% this week
          </span>
        </div>
      </mat-card>
    </div>

    <div class="col-md-4 montserrat-text">
      <mat-card
        class="dashboard-card"
        style="
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
          border-radius: 12px;
          background: #ffffff;
        "
      >
        <div class="d-flex align-items-center gap-2 mb-3">
          <div class="icon-circle bg-primary bg-opacity-25 text-primary">
            <mat-icon>account_balance_wallet</mat-icon>
          </div>
          <h6 class="mb-0 fw-semibold text-uppercase fs-6">Payouts</h6>
        </div>

        <div class="d-flex justify-content-around mb-3 text-center">
          <div>
            <h4 class="fw-bold text-primary mb-0">$76K</h4>
            <small class="text-muted">Paid</small>
          </div>
          <div>
            <h4 class="fw-bold text-warning mb-0">$10K</h4>
            <small class="text-muted">Needs Approval</small>
          </div>
          <div>
            <h4 class="fw-bold text-success mb-0">$1025</h4>
            <small class="text-muted">Miscellaneous</small>
          </div>
        </div>

        <button
          mat-raised-button
          color="primary"
          class="mt-2 rounded-pill px-4"
        >
          View More
        </button>
      </mat-card>
    </div>

    <div
      class="row mt g-3"
      style="background-color: #f8f9fa; padding: 15px; border-radius: 8px"
    >
      <div class="col-md-8 montserrat-text">
        <mat-card
          class="dashboard-card p-4"
          style="
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            background: #ffffff;
          "
        >
          <div
            class="d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2"
          >
            <h5 class="mb-0 fw-semibold text-uppercase fs-6">
              Earnings View
            </h5>
            <p-dropdown
              [options]="weekOptions"
              [(ngModel)]="selectedWeek"
              placeholder="Select Week"
              styleClass="p-dropdown-sm earnings-dropdown"
            ></p-dropdown>
          </div>

          <p-chart
            type="bar"
            [data]="earningsData"
            [options]="earningsOptions"
            style="height: 400px"
          ></p-chart>
        </mat-card>
      </div>

      <div class="col-md-4 montserrat-text">
        <mat-card
          class="dashboard-card p-4"
          style="
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            background: #ffffff;
          "
        >
          <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="d-flex align-items-center gap-2">
              <mat-icon>event</mat-icon>
              <h6 class="fw-semibold text-uppercase mb-0 fs-6">Events</h6>
              <mat-icon
                matTooltip="Upcoming and past events"
                class="text-muted"
                style="font-size: 16px; margin-top: 8px"
                >info</mat-icon
              >
            </div>
            <button mat-flat-button class="btn-sm custom-teal">
              Open Calendar
            </button>
          </div>

          <div *ngFor="let event of events" class="mb-2">
            <div class="d-flex align-items-center gap-3 p-2 rounded hover-bg">
              <div
                class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex flex-column align-items-center justify-content-center text-center"
                style="width: 60px; height: 60px; min-width: 60px"
              >
                <div class="fw-bold small">{{ event.month }}</div>
                <div class="fw-semibold">{{ event.day }}</div>
              </div>

              <div class="d-flex align-items-center gap-2 flex-grow-1">
                <img
                  src="{{ event.avatar }}"
                  alt="{{ event.title }}"
                  class="rounded-circle"
                  width="40"
                  height="40"
                />
                <div>
                  <div class="fw-semibold">{{ event.title }}</div>
                  <div class="text-muted small">{{ event.subtitle }}</div>
                </div>
              </div>
            </div>
          </div>
        </mat-card>
      </div>
    </div>
  </div>
  <div
    class="container py-5 my-4 montserrat-text"
    style="
      background-color: #f8f9fa;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    "
  >
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div class="d-flex align-items-center">
        <mat-icon class="me-2" style="font-size: 32px">track_changes</mat-icon>
        <h4 class="fw-bold ps-2 mb-0">Real Time Tracking</h4>
      </div>
      <button mat-button class="custom-teal py-2 px-3 mb-5">View All</button>
    </div>

    <div
      class="position-relative bg-light py-4"
      style="min-height: 60vh; background-color: #f8f9fa; border-radius: 8px"
    >
      <div
        class="position-relative d-flex justify-content-between text-center text-muted mb-5 px-2"
      >
        <ng-container
          *ngFor="
            let hour of [
              '07:00 AM',
              '08:00 AM',
              '09:00 AM',
              '10:00 AM',
              '11:00 AM',
              '12:00 PM',
              '01:00 PM',
              '02:00 PM',
              '03:00 PM',
              '04:00 PM',
              '05:00 PM',
              '06:00 PM'
            ]
          "
        >
          <div
            class="position-relative d-flex flex-column align-items-center"
            style="width: 100px"
          >
            <div class="fw-medium mb-1">{{ hour }}</div>
            <div
              style="
                width: 10px;
                height: 10px;
                background-color: #007bff;
                border-radius: 50%;
              "
            ></div>
            <div
              style="
                height: 600px;
                border-left: 2px dashed #ccc;
                margin-top: 5px;
              "
            ></div>
          </div>
        </ng-container>
      </div>

      <div
        class="position-absolute top-0 start-0 w-100"
        style="padding-top: 60px; height: 500px"
      >
        <div
          *ngFor="let task of tasks"
          class="position-absolute"
          [ngStyle]="{ top: task.position.top, left: task.position.left }"
        >
          <mat-card
            class="shadow rounded-4 border border-light-subtle"
            style="
              width: 250px;
              background: #ffffff;
              transition: all 0.3s ease;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            "
          >
            <mat-card-header class="pb-0">
              <div class="d-flex align-items-center gap-2">
                <img
                  [src]="task.avatarUrl || 'assets/default-user.png'"
                  class="rounded-circle"
                  alt="{{ task.name }}"
                  width="32"
                  height="32"
                />
                <div class="fw-semibold text-dark">{{ task.name }}</div>
              </div>
            </mat-card-header>

            <mat-card-content class="pt-2">
              <div
                class="text-muted small mb-2 d-flex align-items-center gap-1"
              >
                <mat-icon fontIcon="access_time" color="accent"></mat-icon>
                Drop at {{ task.dropTime }}
              </div>

              <div
                class="d-flex justify-content-between align-items-center mb-1"
              >
                <div class="text-muted small">Progress</div>
                <div class="d-flex align-items-center gap-1">
                  <mat-icon color="primary">{{
                    task.vehicle === "car" ? "directions_car" : "two_wheeler"
                  }}</mat-icon>
                  <span class="small text-dark">{{ task.progress }}%</span>
                </div>
              </div>

              <mat-progress-bar
                mode="determinate"
                [value]="task.progress"
                class="my-2"
                color="primary"
                style="height: 20px; border-radius: 2px"
              ></mat-progress-bar>

              <button
                mat-raised-button
                class="w-100 mt-2 py-1 px-1 "
                 style="background-color: teal; color: white; border-radius:4px; "
              >
                View Route
              </button>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
